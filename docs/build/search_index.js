var documenterSearchIndex = {"docs":
[{"location":"module/refraction.html#Refraction","page":"Refraction","title":"Refraction","text":"","category":"section"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"Photons refraction between air and water ","category":"page"},{"location":"module/refraction.html#Snell's-Law","page":"Refraction","title":"Snell's Law","text":"","category":"section"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"angle of reflection ","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"theta_r = cos^-1hatxicdothatn","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"When our incoming photon is directly downward: hatxi=beginbmatrix001endbmatrix and the normal vector can be defined by hatn=dfrac1sqrt1+left(eta_xright)^2+left(eta_yright)^2left(-eta_xhati-eta_yhatj+hatkright) When, eta_x is the partial derivative the partial derivative of eta with respect to x: dfracpartialetapartial x and eta_y is the partial derivative the partial derivative of eta with respect to y: dfracpartialetapartial y","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"Therefore, the angle of reflection, in this module, can be described by ","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"theta_r = cos^-1left(frac1sqrt1+left(eta_xright)^2+left(eta_yright)^2right)","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"angle of transmission","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"theta_t = sin^-1left(frac1n_wsinthetaright)","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"theta_t = sin^-1left(fracn_an_wsqrtfracleft(eta_xright)^2+left(eta_yright)^21+left(eta_xright)^2+left(eta_yright)^2right)","category":"page"},{"location":"module/refraction.html#Fresnel-Reflectance","page":"Refraction","title":"Fresnel Reflectance","text":"","category":"section"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"r(theta) equiv r(hatxicdothatn) = frac12leftleftfracsin(theta-theta_t)sin(theta-theta_t)right^2+leftfractan(theta-theta_t)tan(theta-theta_t)right^2right","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"r(theta) equiv r(hatxicdothatn) = frac12leftleftfrac2sin(theta_t)cos(theta)sin(theta-theta_t)right^2+leftfrac2sin(theta_t)cos(theta)sin(theta+theta_t)cos(theta-theta_t)right^2right","category":"page"},{"location":"module/refraction.html#result","page":"Refraction","title":"result","text":"","category":"section"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"temx = -fraceta_xsqrt(eta_x)^2+(eta_y)^2","category":"page"},{"location":"module/refraction.html","page":"Refraction","title":"Refraction","text":"temy = -fraceta_ysqrt(eta_x)^2+(eta_y)^2","category":"page"},{"location":"module/Parameters.html#Parameters","page":"Parameters","title":"Parameters","text":"","category":"section"},{"location":"module/Parameters.html#Coordinate-system-and-notation","page":"Parameters","title":"Coordinate system and notation","text":"","category":"section"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"LightMC.jl is formulated in the spherical system hatzeta = (thetaphi), where polar angle theta is measured from the direction of hatz and the azimuthal ange phi is measured positive counter clockwise from hatx, when looking toward the origin along hatz. Let hatxi denoted a unit vector pointing in the desired direction, when hatxi=left(xi_xxi_yxi_zright), and becasue hatxi is of unit length, its component satisfy hatxi_x^2+hatxi_y^2+hatxi_z^2=1. Therefore, ","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"hatxi = beginbmatrix sin(theta)cos(phi) sin(theta)sin(phi) cos(theta) endbmatrix","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"To simplify the term above, we simplify hatxi by using the cosine parameter.","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"hatxi = beginbmatrixmu_x mu_y mu_z endbmatrix = beginbmatrixsin(theta)cos(phi) sin(theta)sin(phi) cos(theta) endbmatrix ","category":"page"},{"location":"module/Parameters.html#Local-Coordinate-system","page":"Parameters","title":"Local Coordinate system","text":"","category":"section"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"When we calculate for the scattering direction, our result is in the local coordination system (hat(theta)hat(phi)hat(r)), when radial unit vector hat(r) is the same initial direction of photons before scattering hatxi, the azimuthal unit vector hat(phi) is defined by the cross product of the ocean coordinate system hatz and the incident vector's direction hatphi=frachatztimeshatrhatztimeshatr, and polar unit vector is given by hattheta=hatphitimeshatr.  Therefore, the unit vector of the scattered direction of photons hatxi_s can be described in the local coordination system (hat(theta)hat(phi)hat(r)) as,","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"hatxi_(s) = beginbmatrix sin(theta_s)cos(phi_s) sin(theta_s)sin(phi_s) cos(theta_s) endbmatrix","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"when, theta_s and phi_s is polar angle and azimuthal angle in relative to the local coordinate system (hat(theta)hat(phi)hat(r)). ","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"To change from the local coordinate system to the cartesian coordination in the global system, we multiply hatxi_(s) by the basis of our local coordinate system.","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"beginbmatrix mu_x mu_y mu_z endbmatrix = beginbmatrixhattheta  hatphi  hatr endbmatrixbeginbmatrixhatxi_(s)endbmatrix","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"And, after we do the cross product and substitute hatxi_(s). ","category":"page"},{"location":"module/Parameters.html","page":"Parameters","title":"Parameters","text":"beginbmatrix mu_x mu_y mu_z endbmatrix = beginbmatrixfracmu_xmu_zsqrt1-mu_z^2-fracmu_ysqrt1-mu_z^2mu_xfracmu_ymu_zsqrt1-mu_z^2fracmu_xsqrt1-mu_z^2mu_y-sqrt1-mu_z^20mu_z endbmatrixbeginbmatrix sin(theta_s)cos(phi_s) sin(theta_s)sin(phi_s) cos(theta_s) endbmatrix","category":"page"},{"location":"QuickStart.html#Quick-Start","page":"Quick Start","title":"Quick Start","text":"","category":"section"},{"location":"QuickStart.html","page":"Quick Start","title":"Quick Start","text":"import LightMC","category":"page"},{"location":"QuickStart.html#Initial-Condition","page":"Quick Start","title":"Initial Condition","text":"","category":"section"},{"location":"QuickStart.html","page":"Quick Start","title":"Quick Start","text":"For the input initial condition, the function readparam will automatically read the input from light.yml file.  Below, is the structure contained in the light.yml file.","category":"page"},{"location":"QuickStart.html","page":"Quick Start","title":"Quick Start","text":"using YAML\n\nYAML.write_file(\"light.yml\",\"\nirradiance:\n  nz: 200\n  dz: 1\n  nxe: 512\n  nye: 512\n  num: 31\n  ztop: 10\nphoton:\n  nphoton: 10000000\n  kr: 10\n  nxp: 512\n  kbc: 0\n  b: 0.006\n  nyp: 512\n  a: 0.007\nwave:\n  pey: 0.07853981633974483\n  nxeta: 512\n  nyeta: 512\n  pex: 0.07853981633974483\n\")","category":"page"},{"location":"QuickStart.html","page":"Quick Start","title":"Quick Start","text":"We, then, store all the input variable in the struct p, by using the function below. ","category":"page"},{"location":"QuickStart.html","page":"Quick Start","title":"Quick Start","text":"using Pkg # hide\nPkg.activate(\"https://github.com/tayT0T/LightMC.jl.git\") # hide\nimport LightMC\np=readparams()","category":"page"},{"location":"QuickStart.html","page":"Quick Start","title":"Quick Start","text":"allind=1:p.nphoton\n\"η is the height(z axis) corresponding to each grid point on the surface, 2d array of grid number in x and y direction\"\nη=zeros(p.nxs,p.nys)\n\"ηx is the x coordination corresponding to each grid point on the surface, 2d array of grid number in x and y direction\"\nηx=zeros(p.nxs,p.nys)\n\"ηy is the y coordination corresponding to each grid point on the surface, 2d array of grid number in x and y direction\"\nηy=zeros(p.nxs,p.nys)\nϕps,θps=phasePetzold()","category":"page"},{"location":"QuickStart.html","page":"Quick Start","title":"Quick Start","text":"ed=zeros(p.nx,p.ny,p.nz)\nesol=zeros(p.num,p.nz)\narea=zeros(4)\ninteri=zeros(Int64,4)\ninterj=zeros(Int64,4)\nxpb=zeros(p.nxp,p.nyp)\nypb=zeros(p.nxp,p.nyp)\nzpb=zeros(p.nxp,p.nyp)\nθ=zeros(p.nxp,p.nyp)\nϕ=zeros(p.nxp,p.nyp)\nfres=zeros(p.nxp,p.nyp)\nix=div(p.nxη,2)+1\niy=div(p.nyη,2)+1","category":"page"},{"location":"QuickStart.html#Run-the-Monte-Carlo-Simulation","page":"Quick Start","title":"Run the Monte Carlo Simulation","text":"","category":"section"},{"location":"module/MonteCarlo.html#Fundamental-Principle-of-Monte-Carlo-Simulation","page":"Monte Carlo Simulation","title":"Fundamental Principle of Monte Carlo Simulation","text":"","category":"section"},{"location":"module/MonteCarlo.html","page":"Monte Carlo Simulation","title":"Monte Carlo Simulation","text":"p_Re (Re) equiv begincases\n1  quad 0 leq Re leq 1 \n0  quad Re  0 cup Re  1\nendcases","category":"page"},{"location":"module/MonteCarlo.html#The-Optical-Path-Length","page":"Monte Carlo Simulation","title":"The Optical Path Length","text":"","category":"section"},{"location":"module/MonteCarlo.html","page":"Monte Carlo Simulation","title":"Monte Carlo Simulation","text":"r=-frac1clnRe","category":"page"},{"location":"module/MonteCarlo.html#Sampling-Scattering-direction","page":"Monte Carlo Simulation","title":"Sampling Scattering direction","text":"","category":"section"},{"location":"module/MonteCarlo.html","page":"Monte Carlo Simulation","title":"Monte Carlo Simulation","text":"azimuthal angle in the plane of the scattering event relative to the direction of photons before scattering varphi is uniformly distribute between 0 and 2pi Therefore,","category":"page"},{"location":"module/MonteCarlo.html","page":"Monte Carlo Simulation","title":"Monte Carlo Simulation","text":"varphi = 2piRe","category":"page"},{"location":"module/MonteCarlo.html","page":"Monte Carlo Simulation","title":"Monte Carlo Simulation","text":"To find the angle between new trajectory and the direction of photons before scattering, we use the Petzold..","category":"page"},{"location":"module/MonteCarlo.html","page":"Monte Carlo Simulation","title":"Monte Carlo Simulation","text":"phasePetzold()","category":"page"},{"location":"module/MonteCarlo.html#LightMC.phasePetzold-Tuple{}","page":"Monte Carlo Simulation","title":"LightMC.phasePetzold","text":"phasePetzold()\n\nreturn 2 arrays: ϕps and θps. When ϕps is the cumulation distribution of scattering angle and θps is the angle between new trajectory and the direction of the photon before scattering corresponding to each ϕps For example, the probability to find the scattering photon from the direction of the photon before scattering to θps[1] is ϕps[1] The data come from Kirk,1981, Monte Carlo Procedure for Simulating the Penetration of Light into Natural Waters\n\n\n\n\n\n","category":"method"},{"location":"index.html#LightMC.jl-Documentation","page":"Home","title":"LightMC.jl Documentation","text":"","category":"section"},{"location":"index.html#Overview","page":"Home","title":"Overview","text":"","category":"section"},{"location":"index.html","page":"Home","title":"Home","text":"LightMC.jl is a collection of functions that can be used to calculate the downaward irradiance field and run the Monte Carlo Simulation","category":"page"},{"location":"index.html#Installation","page":"Home","title":"Installation","text":"","category":"section"},{"location":"index.html","page":"Home","title":"Home","text":"using Pkg \nPkg.activate(\"https://github.com/tayT0T/LightMC.jl.git\") ","category":"page"}]
}
